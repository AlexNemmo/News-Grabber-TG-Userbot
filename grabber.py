from telethon import TelegramClient, events
import configparser

# Reading Configs
config = configparser.ConfigParser()
config.read("config.ini")

# Setting configuration values
api_id = config['Telegram']['api_id']
api_hash = config['Telegram']['api_hash']
username = config['Telegram']['username']

# Переменные каналов
my_channel = -1001550045130
channels = [
    -1001441318107, -1001200803575, -1001226960959, -1001393914404, -1001157371311, -1001365432225,
    -1001071752104, -1001337088675, -1001440229722, -1001049181524, -1001179006758, -1001315676483,
    -1001383348298, -1001247433910, -1001465857656, -1001360296574, -1001425186624, -1001465759718,
    -1001137382253, -1001360607953, -1001319551528, -1001128314692, -1001433444460, -1001254448264,
    -1001441120468, -1001475693094, -1001444821243, -1001504434831, -1001005993407, -1001102210815,
    -1001043793945, -1001367172810, -1001262866379, -1001167937974, -1001333809979, -1001030556192,
    -1001111641330, -1001307778786, -1001457626608, -1001133853974, -1001409431139, -1001182568527,
    -1001356500677, -1001112483048, -1001252876263, -1001119117178, -1001140723163, -1001379901569,
    -1001360213421, -1001476218262, -1001238720454, -1001181535412, -1001406098182, -1001188728921,
    -1001177666391, -1001287542085, -1001221484184, -1001324978726, -1001385590013, -1001177889939,
    -1001414909052, -1001254137821, -1001110896124, -1001329351546, -1001176326847, -1001162400014,
    -1001323455529, -1001140131646, -1001313891583, -1001571233543, -1001286236329, -1001416385000,
    -1001306944583, -1001186308684, -1001346461727, -1001200372322, -1001305323621, -1001199650412,
    -1001351933144, -1001464892963, -1001360537618, -1001305669171, -1001349460131, -1001437267435,
    -1001207359381, -1001376753523, -1001485766497
]

# Create the client and connect
client = TelegramClient(username, api_id, api_hash)
print("Grabber - Started")


@client.on(events.NewMessage(chats=channels))
async def my_event_handler(event):
    if event.message:
        await client.forward_messages(my_channel, event.message)


client.start()
client.run_until_disconnected()
